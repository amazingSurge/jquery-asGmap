/**
* jQuery asGmap v0.3.0
* https://github.com/amazingSurge/jquery-asGmap
*
* Copyright (c) amazingSurge
* Released under the LGPL-3.0 license
*/
!function(o,t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("undefined"!=typeof exports)t(require("jquery"));else{var e={exports:{}};t(o.jQuery),o.jqueryAsGmapEs=e.exports}}(this,function(o){"use strict";function t(o){return o&&o.__esModule?o:{default:o}}function e(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}var n=t(o),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol?"symbol":typeof o},a=function(){function o(o,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),r={namespace:"gmap",apikey:"",mapType:"ROADMAP",backgroundcolor:"#e5e3df",defaultui:!0,doubleclickzoom:!1,maptypecontrol:!0,maxzoom:null,minzoom:null,pancontrol:!1,rotatecontrol:!1,scalecontrol:!1,scrollwheel:!1,streetviewcontrol:!1,styles:!1,zoom:3,zoomcontrol:!0,controlspositions:{mapType:null,pan:null,rotate:null,scale:null,streetView:null,zoom:null},latitude:null,longitude:null,address:"",markers:[],icon:{url:"http://www.google.com/mapfiles/marker.png",size:[20,34],anchor:[9,34]},markercenter:!0,content:"",popup:!0,onInit:null,onReady:null},s="asGmap",l=[],p=!1,c=function(){function o(t,a){e(this,o),this.element=t,this.$element=(0,n.default)(t),this.options=n.default.extend({},r,a,this.$element.data()),this.namespace=this.options.namespace,this.$element.addClass(this.namespace),this.initialized=!1,this._trigger("init"),"object"===i(window.google)&&window.google.maps?this.init():(l.push(this),this.loadScript())}return a(o,[{key:"loadScript",value:function(){if(!p){p=!0;var o=document.createElement("script");o.type="text/javascript";var t=this.options.apikey?"&key="+this.options.apikey:"";o.src=document.location.protocol+"//maps.googleapis.com/maps/api/js?callback=asGmapOnScriptLoaded"+t,document.body.appendChild(o)}}},{key:"init",value:function(){var o=this,t=this.options,e={backgroundColor:t.backgroundcolor,center:new window.google.maps.LatLng(t.latitude,t.longitude),disableDefaultUI:!t.defaultuI,disableDoubleClickZoom:!t.doubleclickzoom,draggable:!0,keyboardShortcuts:!0,mapTypeControl:t.maptypecontrol,mapTypeControlOptions:{},mapTypeId:window.google.maps.MapTypeId[t.maptype],maxZoom:t.maxzoom,minZoom:t.minzoom,panControl:t.pancontrol,panControlOptions:{},rotateControl:t.rotatecontrol,rotateControlOptions:{},scaleControl:t.scalecontrol,scaleControlOptions:{},scrollwheel:t.scrollwheel,streetViewControl:t.streetviewcontrol,streetViewControlOptions:{},zoom:t.zoom,zoomControl:t.zoomcontrol,zoomControlOptions:{}};t.controlspositions.mapType&&(e.mapTypeControlOptions.position=t.controlspositions.mapType),t.controlspositions.pan&&(e.panControlOptions.position=t.controlspositions.pan),t.controlspositions.rotate&&(e.rotateControlOptions.position=t.controlspositions.rotate),t.controlspositions.scale&&(e.scaleControlOptions.position=t.controlspositions.scale),t.controlspositions.streetView&&(e.streetViewControlOptions.position=t.controlspositions.streetView),t.controlspositions.zoom&&(e.zoomControlOptions.position=t.controlspositions.zoom),t.styles&&(e.styles=t.styles);var n=function(){o.map=new window.google.maps.Map(o.element,e),o.options.markercenter&&o.addMarker({latitude:t.latitude,longitude:t.longitude,address:t.address,content:t.content,popup:t.popup}),o.addMarkers(o.options.markers),o.initialized=!0,o._trigger("ready")};this.geocoder=new window.google.maps.Geocoder,t.address?this.geocoder.geocode({address:t.address},function(o){o&&o.length&&(e.center=o[0].geometry.location),n()}):n()}},{key:"getMap",value:function(){return this.map}},{key:"addMarker",value:function(o){var t=this,e={};o=n.default.extend({icon:this.options.icon,content:"",popup:!1},o),e.icon={url:o.icon.url,size:new window.google.maps.Size(o.icon.size[0],o.icon.size[1]),anchor:new window.google.maps.Point(o.icon.anchor[0],o.icon.anchor[1])};var i=function(){var n=new window.google.maps.Marker(e);n.setMap(t.map),o.content&&!function(){var e=new window.google.maps.InfoWindow({content:'<div class="'+t.namespace+'-content">'+o.content+"</div>"});window.google.maps.event.addListener(n,"click",function(){e.open(t.map,n)}),o.popup&&e.open(t.map,n)}()};o.hasOwnProperty("latitude")&&o.hasOwnProperty("longitude")&&o.latitude&&o.longitude?(e.position=new window.google.maps.LatLng(o.latitude,o.longitude),i()):o.hasOwnProperty("address")&&this.geocoder.geocode({address:o.address},function(o){o&&o.length&&(e.position=o[0].geometry.location,i())})}},{key:"addMarkers",value:function(o){for(var t=0;t<o.length;t++)this.addMarker(o[t]);return this.markers}},{key:"_trigger",value:function(o){for(var t,e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a=(t=[this]).concat.apply(t,n);this.$element.trigger(s+"::"+o,a),o=o.replace(/\b\w+\b/g,function(o){return o.substring(0,1).toUpperCase()+o.substring(1)});var r="on"+o;if("function"==typeof this.options[r]){var l;(l=this.options[r]).apply.apply(l,[this].concat(n))}}},{key:"destory",value:function(){this.$element.data(s,null),this._trigger("destory")}}],[{key:"setDefaults",value:function(o){n.default.extend(r,n.default.isPlainObject(o)&&o)}}]),o}();window.asGmapOnScriptLoaded=function(){var o=!0,t=!1,e=void 0;try{for(var n,i=l[Symbol.iterator]();!(o=(n=i.next()).done);o=!0){var a=n.value;a.init()}}catch(o){t=!0,e=o}finally{try{!o&&i.return&&i.return()}finally{if(t)throw e}}};var u={version:"0.3.0"},d="asGmap",f=n.default.fn.asGmap,m=function(o){for(var t=this,e=arguments.length,a=Array(e>1?e-1:0),r=1;r<e;r++)a[r-1]=arguments[r];if("string"==typeof o){var s=function(){var e=o;if(/^_/.test(e))return{v:!1};if(!/^(get)/.test(e))return{v:t.each(function(){var o=n.default.data(this,d);o&&"function"==typeof o[e]&&o[e].apply(o,a)})};var i=t.first().data(d);return i&&"function"==typeof i[e]?{v:i[e].apply(i,a)}:void 0}();if("object"===("undefined"==typeof s?"undefined":i(s)))return s.v}return this.each(function(){(0,n.default)(this).data(d)||(0,n.default)(this).data(d,new c(this,o))})};n.default.fn.asGmap=m,n.default.asGmap=n.default.extend({setDefaults:c.setDefaults,noConflict:function(){return n.default.fn.asGmap=f,m}},u)});